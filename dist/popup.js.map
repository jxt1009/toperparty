{"version":3,"file":"popup.js","mappings":"MAEA,IAAIA,EAAS,CACXC,aAAa,EACbC,OAAQ,KACRC,OAAQ,KACRC,gBAAgB,GAIlB,MAAMC,EAAWC,SAASC,eAAe,UACnCC,EAAaF,SAASC,eAAe,eACrCE,EAAkBH,SAASC,eAAe,oBAC1CG,EAAYJ,SAASC,eAAe,cACpCI,EAAeL,SAASC,eAAe,iBACvCK,EAAWN,SAASC,eAAe,aACnCM,EAAUP,SAASC,eAAe,YAClCO,EAAYR,SAASC,eAAe,cACpCQ,EAAcT,SAASC,eAAe,gBACtCS,EAAcV,SAASC,eAAe,gBACtCU,EAAaX,SAASC,eAAe,eACrCW,EAAcZ,SAASC,eAAe,gBACtCY,EAAcb,SAASC,eAAe,iBAa5C,SAASa,IACPC,QAAQC,IAAI,uBACZC,OAAOC,QAAQC,YAAY,CAAEC,KAAM,cAAiBC,IAClDN,QAAQC,IAAI,uBAAwBK,GAChCJ,OAAOC,QAAQI,UACjBP,QAAQQ,MAAM,wBAAyBN,OAAOC,QAAQI,WAGpDD,GACF3B,EAAS2B,EACTN,QAAQC,IAAI,kBAAmBtB,GAQrC,WACE,MAAM,YAAEC,EAAW,OAAEC,EAAM,OAAEC,EAAM,eAAEC,GAAmBJ,EAEpDC,GACFI,EAASyB,UAAY,mBACrBtB,EAAWuB,YAAc,eACzBtB,EAAgBuB,UAAUC,OAAO,UACjCrB,EAASoB,UAAUE,IAAI,UACvBrB,EAAQmB,UAAUC,OAAO,UACzBvB,EAAUsB,UAAUC,OAAO,UAE3BlB,EAAYgB,YAAc7B,EAC1Bc,EAAYe,YAAc5B,IAK1BE,EAASyB,UAAY,sBACrBtB,EAAWuB,YAAc,kBACzBtB,EAAgBuB,UAAUC,OAAO,UACjCrB,EAASoB,UAAUC,OAAO,UAC1BpB,EAAQmB,UAAUE,IAAI,UACtBxB,EAAUsB,UAAUE,IAAI,UACxBvB,EAAaqB,UAAUE,IAAI,UAC3BjB,EAAWkB,UAAY,KACvBjB,EAAYiB,UAAY,KAE5B,CAlCMC,IAEAf,QAAQgB,KAAK,uCAGnB,CA1BAjB,IAKER,EAAS0B,iBAAiB,QAoD5BC,iBACE,MAAMrC,EAASY,EAAU0B,MAAMC,aAAUC,EAEzC,IACE9B,EAAS+B,UAAW,EACpBnC,EAAWuB,YAAc,kBAEzBR,OAAOC,QAAQC,YACb,CAAEC,KAAM,cAAexB,UACtByB,IACKA,EAASiB,SACXvB,QAAQC,IAAI,8BACZuB,WAAWzB,EAAc,OAEzB0B,MAAM,UAAYnB,EAASE,OAC3BrB,EAAWuB,YAAc,kBACzBnB,EAAS+B,UAAW,IAI5B,CAAE,MAAOI,GACPD,MAAM,yBAA2BC,EAAIC,SACrCpC,EAAS+B,UAAW,CACtB,CACF,GA3EE9B,EAAQyB,iBAAiB,QA6E3B,WACEf,OAAOC,QAAQC,YAAY,CAAEC,KAAM,cAAgB,KACjDZ,EAAU0B,MAAQ,GAClBpB,KAEJ,GAjFED,EAAYmB,iBAAiB,QAmF/B,WACMtC,EAAOE,SACT+C,UAAUC,UAAUC,UAAUnD,EAAOE,QACrCiB,EAAYY,YAAc,IAC1Bc,WAAW,KACT1B,EAAYY,YAAc,MACzB,KAEP,GAIEX,IAEAgC,YAAYhC,EAAc,KAI5BG,OAAOC,QAAQ6B,UAAUC,YAAY,CAACC,EAASC,EAAQC,KAChC,2BAAjBF,EAAQ7B,OACVL,QAAQC,IAAI,0BACZJ,EAAYiB,UAAYoB,EAAQG,S","sources":["webpack://toperparty/./chrome-extension/popup.js"],"sourcesContent":["// popup.js - Extension popup UI\r\n\r\nlet status = {\r\n  isConnected: false,\r\n  roomId: null,\r\n  userId: null,\r\n  hasLocalStream: false\r\n};\r\n\r\n// DOM elements\r\nconst statusEl = document.getElementById('status');\r\nconst statusText = document.getElementById('status-text');\r\nconst controlsSection = document.getElementById('controls-section');\r\nconst partyInfo = document.getElementById('party-info');\r\nconst videoSection = document.getElementById('video-section');\r\nconst startBtn = document.getElementById('start-btn');\r\nconst stopBtn = document.getElementById('stop-btn');\r\nconst roomInput = document.getElementById('room-input');\r\nconst roomDisplay = document.getElementById('room-display');\r\nconst userDisplay = document.getElementById('user-display');\r\nconst localVideo = document.getElementById('local-video');\r\nconst remoteVideo = document.getElementById('remote-video');\r\nconst copyRoomBtn = document.getElementById('copy-room-btn');\r\n\r\n// Initialize\r\nupdateStatus();\r\nsetupEventListeners();\r\nstartStatusPolling();\r\n\r\nfunction setupEventListeners() {\r\n  startBtn.addEventListener('click', startParty);\r\n  stopBtn.addEventListener('click', stopParty);\r\n  copyRoomBtn.addEventListener('click', copyRoomId);\r\n}\r\n\r\nfunction updateStatus() {\r\n  console.log('updateStatus called');\r\n  chrome.runtime.sendMessage({ type: 'GET_STATUS' }, (response) => {\r\n    console.log('GET_STATUS response:', response);\r\n    if (chrome.runtime.lastError) {\r\n      console.error('Failed to get status:', chrome.runtime.lastError);\r\n      return;\r\n    }\r\n    if (response) {\r\n      status = response;\r\n      console.log('Status updated:', status);\r\n      updateUI();\r\n    } else {\r\n      console.warn('No response from background script');\r\n    }\r\n  });\r\n}\r\n\r\nfunction updateUI() {\r\n  const { isConnected, roomId, userId, hasLocalStream } = status;\r\n\r\n  if (isConnected) {\r\n    statusEl.className = 'status connected';\r\n    statusText.textContent = 'ðŸŸ¢ Connected';\r\n    controlsSection.classList.remove('hidden');\r\n    startBtn.classList.add('hidden');\r\n    stopBtn.classList.remove('hidden');\r\n    partyInfo.classList.remove('hidden');\r\n    //videoSection.classList.remove('hidden');\r\n    roomDisplay.textContent = roomId;\r\n    userDisplay.textContent = userId;\r\n\r\n    // Display local video (will be set when stream is available)\r\n    // Note: Local stream is managed by the background script\r\n  } else {\r\n    statusEl.className = 'status disconnected';\r\n    statusText.textContent = 'ðŸ”´ Disconnected';\r\n    controlsSection.classList.remove('hidden');\r\n    startBtn.classList.remove('hidden');\r\n    stopBtn.classList.add('hidden');\r\n    partyInfo.classList.add('hidden');\r\n    videoSection.classList.add('hidden');\r\n    localVideo.srcObject = null;\r\n    remoteVideo.srcObject = null;\r\n  }\r\n}\r\n\r\nasync function startParty() {\r\n  const roomId = roomInput.value.trim() || undefined;\r\n\r\n  try {\r\n    startBtn.disabled = true;\r\n    statusText.textContent = 'â³ Connecting...';\r\n\r\n    chrome.runtime.sendMessage(\r\n      { type: 'START_PARTY', roomId },\r\n      (response) => {\r\n        if (response.success) {\r\n          console.log('Party started successfully');\r\n          setTimeout(updateStatus, 500);\r\n        } else {\r\n          alert('Error: ' + response.error);\r\n          statusText.textContent = 'ðŸ”´ Disconnected';\r\n          startBtn.disabled = false;\r\n        }\r\n      }\r\n    );\r\n  } catch (err) {\r\n    alert('Error starting party: ' + err.message);\r\n    startBtn.disabled = false;\r\n  }\r\n}\r\n\r\nfunction stopParty() {\r\n  chrome.runtime.sendMessage({ type: 'STOP_PARTY' }, () => {\r\n    roomInput.value = '';\r\n    updateStatus();\r\n  });\r\n}\r\n\r\nfunction copyRoomId() {\r\n  if (status.roomId) {\r\n    navigator.clipboard.writeText(status.roomId);\r\n    copyRoomBtn.textContent = 'âœ“';\r\n    setTimeout(() => {\r\n      copyRoomBtn.textContent = 'ðŸ“‹';\r\n    }, 2000);\r\n  }\r\n}\r\n\r\nfunction startStatusPolling() {\r\n  // Initial status check\r\n  updateStatus();\r\n  // Then poll every 2 seconds\r\n  setInterval(updateStatus, 2000);\r\n}\r\n\r\n// Listen for remote stream\r\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\r\n  if (request.type === 'REMOTE_STREAM_RECEIVED') {\r\n    console.log('Received remote stream');\r\n    remoteVideo.srcObject = request.stream;\r\n  }\r\n});\r\n"],"names":["status","isConnected","roomId","userId","hasLocalStream","statusEl","document","getElementById","statusText","controlsSection","partyInfo","videoSection","startBtn","stopBtn","roomInput","roomDisplay","userDisplay","localVideo","remoteVideo","copyRoomBtn","updateStatus","console","log","chrome","runtime","sendMessage","type","response","lastError","error","className","textContent","classList","remove","add","srcObject","updateUI","warn","addEventListener","async","value","trim","undefined","disabled","success","setTimeout","alert","err","message","navigator","clipboard","writeText","setInterval","onMessage","addListener","request","sender","sendResponse","stream"],"ignoreList":[],"sourceRoot":""}