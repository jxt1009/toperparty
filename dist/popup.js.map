{"version":3,"file":"popup.js","mappings":"MAAA,IAAIA,EAAS,CAAEC,aAAa,EAAOC,OAAQ,KAAMC,OAAQ,KAAMC,gBAAgB,GAE/E,MAAMC,EAAWC,SAASC,eAAe,UACnCC,EAAaF,SAASC,eAAe,eACrCE,EAAkBH,SAASC,eAAe,oBAC1CG,EAAYJ,SAASC,eAAe,cACpCI,EAAeL,SAASC,eAAe,iBACvCK,EAAWN,SAASC,eAAe,aACnCM,EAAUP,SAASC,eAAe,YAClCO,EAAWR,SAASC,eAAe,aACnCQ,EAAYT,SAASC,eAAe,cACpCS,EAAcV,SAASC,eAAe,gBACtCU,EAAcX,SAASC,eAAe,gBACtCW,EAAaZ,SAASC,eAAe,eACrCY,EAAcb,SAASC,eAAe,gBACtCa,EAAcd,SAASC,eAAe,iBAa5C,SAASc,IACPC,OAAOC,QAAQC,YAAY,CAAEC,KAAM,cAAiBC,IAC9CJ,OAAOC,QAAQI,WACfD,IACF1B,EAAS0B,EAMf,WACE,MAAM,YAAEzB,EAAW,OAAEC,EAAM,OAAEC,GAAWH,EACpCC,GACFI,EAASuB,UAAY,mBACrBpB,EAAWqB,YAAc,eACzBpB,EAAgBqB,UAAUC,OAAO,UACjCnB,EAASkB,UAAUE,IAAI,UACvBnB,EAAQiB,UAAUC,OAAO,UACzBjB,EAASgB,UAAUC,OAAO,UAC1BrB,EAAUoB,UAAUC,OAAO,UAC3Bf,EAAYa,YAAc3B,EAC1Be,EAAYY,YAAc1B,IAE1BE,EAASuB,UAAY,sBACrBpB,EAAWqB,YAAc,kBACzBpB,EAAgBqB,UAAUC,OAAO,UACjCnB,EAASkB,UAAUC,OAAO,UAC1BlB,EAAQiB,UAAUE,IAAI,UACtBlB,EAASgB,UAAUE,IAAI,UACvBtB,EAAUoB,UAAUE,IAAI,UACxBrB,EAAamB,UAAUE,IAAI,UAC3Bd,EAAWe,UAAY,KACvBd,EAAYc,UAAY,KAE5B,CA7BMC,KAGN,CAnBAb,IAKET,EAASuB,iBAAiB,QA0C5BC,iBACE,MAAMlC,EAASa,EAAUsB,MAAMC,aAAUC,EACzC3B,EAAS4B,UAAW,EACpBhC,EAAWqB,YAAc,kBACzBP,OAAOC,QAAQC,YAAY,CAAEC,KAAM,cAAevB,UAAWwB,IACvDA,EAASe,QACXC,WAAWrB,EAAc,MAEzBsB,MAAM,UAAYjB,EAASkB,OAC3BpC,EAAWqB,YAAc,kBACzBjB,EAAS4B,UAAW,IAG1B,GAtDE3B,EAAQsB,iBAAiB,QAwD3B,WACEb,OAAOC,QAAQC,YAAY,CAAEC,KAAM,cAAgB,KACjDV,EAAUsB,MAAQ,GAClBhB,KAEJ,GA5DEP,EAASqB,iBAAiB,QA8D5B,WACE,MAAMU,EAAgB9B,EAAUsB,MAAMC,QAAUtC,EAAOE,aAAUqC,EACjEzB,EAAS0B,UAAW,EACpBhC,EAAWqB,YAAc,kBACzBP,OAAOC,QAAQC,YAAY,CAAEC,KAAM,cAAgB,KACjDH,OAAOC,QAAQC,YAAY,CAAEC,KAAM,cAAevB,OAAQ2C,GAAkBnB,IAC1EZ,EAAS0B,UAAW,EAChBd,GAAYA,EAASe,QACvBC,WAAWrB,EAAc,MAEzBsB,MAAM,2BAA6BjB,GAAYA,EAASkB,MAAQlB,EAASkB,MAAQ,kBACjFpC,EAAWqB,YAAc,sBAIjC,GA5EET,EAAYe,iBAAiB,QA8E/B,WACMnC,EAAOE,SACT4C,UAAUC,UAAUC,UAAUhD,EAAOE,QACrCkB,EAAYS,YAAc,IAC1Ba,WAAW,KAAQtB,EAAYS,YAAc,MAAS,KAE1D,GAGER,IACA4B,YAAY5B,EAAc,KAG5BC,OAAOC,QAAQ2B,UAAUC,YAAaC,IACf,2BAAjBA,EAAQ3B,OACVN,EAAYc,UAAYmB,EAAQC,S","sources":["webpack://toperparty/./chrome-extension/src/ui/popup.main.js"],"sourcesContent":["let status = { isConnected: false, roomId: null, userId: null, hasLocalStream: false };\n\nconst statusEl = document.getElementById('status');\nconst statusText = document.getElementById('status-text');\nconst controlsSection = document.getElementById('controls-section');\nconst partyInfo = document.getElementById('party-info');\nconst videoSection = document.getElementById('video-section');\nconst startBtn = document.getElementById('start-btn');\nconst stopBtn = document.getElementById('stop-btn');\nconst resetBtn = document.getElementById('reset-btn');\nconst roomInput = document.getElementById('room-input');\nconst roomDisplay = document.getElementById('room-display');\nconst userDisplay = document.getElementById('user-display');\nconst localVideo = document.getElementById('local-video');\nconst remoteVideo = document.getElementById('remote-video');\nconst copyRoomBtn = document.getElementById('copy-room-btn');\n\nupdateStatus();\nsetupEventListeners();\nstartStatusPolling();\n\nfunction setupEventListeners() {\n  startBtn.addEventListener('click', startParty);\n  stopBtn.addEventListener('click', stopParty);\n  resetBtn.addEventListener('click', resetParty);\n  copyRoomBtn.addEventListener('click', copyRoomId);\n}\n\nfunction updateStatus() {\n  chrome.runtime.sendMessage({ type: 'GET_STATUS' }, (response) => {\n    if (chrome.runtime.lastError) return;\n    if (response) {\n      status = response;\n      updateUI();\n    }\n  });\n}\n\nfunction updateUI() {\n  const { isConnected, roomId, userId } = status;\n  if (isConnected) {\n    statusEl.className = 'status connected';\n    statusText.textContent = 'ðŸŸ¢ Connected';\n    controlsSection.classList.remove('hidden');\n    startBtn.classList.add('hidden');\n    stopBtn.classList.remove('hidden');\n    resetBtn.classList.remove('hidden');\n    partyInfo.classList.remove('hidden');\n    roomDisplay.textContent = roomId;\n    userDisplay.textContent = userId;\n  } else {\n    statusEl.className = 'status disconnected';\n    statusText.textContent = 'ðŸ”´ Disconnected';\n    controlsSection.classList.remove('hidden');\n    startBtn.classList.remove('hidden');\n    stopBtn.classList.add('hidden');\n    resetBtn.classList.add('hidden');\n    partyInfo.classList.add('hidden');\n    videoSection.classList.add('hidden');\n    localVideo.srcObject = null;\n    remoteVideo.srcObject = null;\n  }\n}\n\nasync function startParty() {\n  const roomId = roomInput.value.trim() || undefined;\n  startBtn.disabled = true;\n  statusText.textContent = 'â³ Connecting...';\n  chrome.runtime.sendMessage({ type: 'START_PARTY', roomId }, (response) => {\n    if (response.success) {\n      setTimeout(updateStatus, 500);\n    } else {\n      alert('Error: ' + response.error);\n      statusText.textContent = 'ðŸ”´ Disconnected';\n      startBtn.disabled = false;\n    }\n  });\n}\n\nfunction stopParty() {\n  chrome.runtime.sendMessage({ type: 'STOP_PARTY' }, () => {\n    roomInput.value = '';\n    updateStatus();\n  });\n}\n\nfunction resetParty() {\n  const desiredRoomId = roomInput.value.trim() || status.roomId || undefined;\n  resetBtn.disabled = true;\n  statusText.textContent = 'â™»ï¸ Resetting...';\n  chrome.runtime.sendMessage({ type: 'STOP_PARTY' }, () => {\n    chrome.runtime.sendMessage({ type: 'START_PARTY', roomId: desiredRoomId }, (response) => {\n      resetBtn.disabled = false;\n      if (response && response.success) {\n        setTimeout(updateStatus, 500);\n      } else {\n        alert('Error resetting party: ' + (response && response.error ? response.error : 'Unknown error'));\n        statusText.textContent = 'ðŸ”´ Disconnected';\n      }\n    });\n  });\n}\n\nfunction copyRoomId() {\n  if (status.roomId) {\n    navigator.clipboard.writeText(status.roomId);\n    copyRoomBtn.textContent = 'âœ“';\n    setTimeout(() => { copyRoomBtn.textContent = 'ðŸ“‹'; }, 2000);\n  }\n}\n\nfunction startStatusPolling() {\n  updateStatus();\n  setInterval(updateStatus, 2000);\n}\n\nchrome.runtime.onMessage.addListener((request) => {\n  if (request.type === 'REMOTE_STREAM_RECEIVED') {\n    remoteVideo.srcObject = request.stream;\n  }\n});\n"],"names":["status","isConnected","roomId","userId","hasLocalStream","statusEl","document","getElementById","statusText","controlsSection","partyInfo","videoSection","startBtn","stopBtn","resetBtn","roomInput","roomDisplay","userDisplay","localVideo","remoteVideo","copyRoomBtn","updateStatus","chrome","runtime","sendMessage","type","response","lastError","className","textContent","classList","remove","add","srcObject","updateUI","addEventListener","async","value","trim","undefined","disabled","success","setTimeout","alert","error","desiredRoomId","navigator","clipboard","writeText","setInterval","onMessage","addListener","request","stream"],"ignoreList":[],"sourceRoot":""}