(()=>{let e={isConnected:!1,roomId:null,userId:null,hasLocalStream:!1};const t=document.getElementById("status"),n=document.getElementById("status-text"),s=document.getElementById("controls-section"),d=document.getElementById("party-info"),o=document.getElementById("video-section"),c=document.getElementById("start-btn"),r=document.getElementById("stop-btn"),i=document.getElementById("reset-btn"),m=document.getElementById("room-input"),a=document.getElementById("room-display"),l=document.getElementById("user-display"),u=document.getElementById("local-video"),E=document.getElementById("remote-video"),y=document.getElementById("copy-room-btn");function I(){chrome.runtime.sendMessage({type:"GET_STATUS"},m=>{chrome.runtime.lastError||m&&(e=m,function(){const{isConnected:m,roomId:y,userId:I}=e;m?(t.className="status connected",n.textContent="ðŸŸ¢ Connected",s.classList.remove("hidden"),c.classList.add("hidden"),r.classList.remove("hidden"),i.classList.remove("hidden"),d.classList.remove("hidden"),a.textContent=y,l.textContent=I):(t.className="status disconnected",n.textContent="ðŸ”´ Disconnected",s.classList.remove("hidden"),c.classList.remove("hidden"),r.classList.add("hidden"),i.classList.add("hidden"),d.classList.add("hidden"),o.classList.add("hidden"),u.srcObject=null,E.srcObject=null)}())})}I(),c.addEventListener("click",async function(){const e=m.value.trim()||void 0;c.disabled=!0,n.textContent="â³ Connecting...",chrome.runtime.sendMessage({type:"START_PARTY",roomId:e},e=>{e.success?setTimeout(I,500):(alert("Error: "+e.error),n.textContent="ðŸ”´ Disconnected",c.disabled=!1)})}),r.addEventListener("click",function(){chrome.runtime.sendMessage({type:"STOP_PARTY"},()=>{m.value="",I()})}),i.addEventListener("click",function(){const t=m.value.trim()||e.roomId||void 0;i.disabled=!0,n.textContent="â™»ï¸ Resetting...",chrome.runtime.sendMessage({type:"STOP_PARTY"},()=>{chrome.runtime.sendMessage({type:"START_PARTY",roomId:t},e=>{i.disabled=!1,e&&e.success?setTimeout(I,500):(alert("Error resetting party: "+(e&&e.error?e.error:"Unknown error")),n.textContent="ðŸ”´ Disconnected")})})}),y.addEventListener("click",function(){e.roomId&&(navigator.clipboard.writeText(e.roomId),y.textContent="âœ“",setTimeout(()=>{y.textContent="ðŸ“‹"},2e3))}),I(),setInterval(I,2e3),chrome.runtime.onMessage.addListener(e=>{"REMOTE_STREAM_RECEIVED"===e.type&&(E.srcObject=e.stream)})})();
//# sourceMappingURL=popup.js.map