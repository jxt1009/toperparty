(()=>{let e={isConnected:!1,roomId:null,userId:null,hasLocalStream:!1};const t=document.getElementById("status"),n=document.getElementById("status-text"),o=document.getElementById("controls-section"),s=document.getElementById("party-info"),d=document.getElementById("video-section"),c=document.getElementById("start-btn"),r=document.getElementById("stop-btn"),a=document.getElementById("room-input"),l=document.getElementById("room-display"),i=document.getElementById("user-display"),m=document.getElementById("local-video"),u=document.getElementById("remote-video"),g=document.getElementById("copy-room-btn");function E(){console.log("updateStatus called"),chrome.runtime.sendMessage({type:"GET_STATUS"},a=>{console.log("GET_STATUS response:",a),chrome.runtime.lastError?console.error("Failed to get status:",chrome.runtime.lastError):a?(e=a,console.log("Status updated:",e),function(){const{isConnected:a,roomId:g,userId:E,hasLocalStream:y}=e;a?(t.className="status connected",n.textContent="ðŸŸ¢ Connected",o.classList.remove("hidden"),c.classList.add("hidden"),r.classList.remove("hidden"),s.classList.remove("hidden"),l.textContent=g,i.textContent=E):(t.className="status disconnected",n.textContent="ðŸ”´ Disconnected",o.classList.remove("hidden"),c.classList.remove("hidden"),r.classList.add("hidden"),s.classList.add("hidden"),d.classList.add("hidden"),m.srcObject=null,u.srcObject=null)}()):console.warn("No response from background script")})}E(),c.addEventListener("click",async function(){const e=a.value.trim()||void 0;try{c.disabled=!0,n.textContent="â³ Connecting...",chrome.runtime.sendMessage({type:"START_PARTY",roomId:e},e=>{e.success?(console.log("Party started successfully"),setTimeout(E,500)):(alert("Error: "+e.error),n.textContent="ðŸ”´ Disconnected",c.disabled=!1)})}catch(e){alert("Error starting party: "+e.message),c.disabled=!1}}),r.addEventListener("click",function(){chrome.runtime.sendMessage({type:"STOP_PARTY"},()=>{a.value="",E()})}),g.addEventListener("click",function(){e.roomId&&(navigator.clipboard.writeText(e.roomId),g.textContent="âœ“",setTimeout(()=>{g.textContent="ðŸ“‹"},2e3))}),E(),setInterval(E,2e3),chrome.runtime.onMessage.addListener((e,t,n)=>{"REMOTE_STREAM_RECEIVED"===e.type&&(console.log("Received remote stream"),u.srcObject=e.stream)})})();
//# sourceMappingURL=popup.js.map